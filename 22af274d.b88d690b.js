(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{151:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return o})),t.d(r,"metadata",(function(){return c})),t.d(r,"rightToc",(function(){return p})),t.d(r,"default",(function(){return s}));var n=t(1),l=t(9),a=(t(0),t(216)),o={title:"Parallel loop call"},c={id:"reference/opspec/op.yml/call/parallel-loop",title:"Parallel loop call",description:"A parallel loop call is an object that runs a call multiple times in parallel (concurrently with no defined order). Examples of use cases include running multiple identical calls (for load testing, for example) or running multiple parameterized calls (such as an identical build for different target architectures).",source:"@site/docs/reference/opspec/op.yml/call/parallel-loop.md",permalink:"/docs/reference/opspec/op.yml/call/parallel-loop",editUrl:"https://github.com/opctl/opctl/edit/master/website/docs/reference/opspec/op.yml/call/parallel-loop.md",lastUpdatedBy:"Cameron Little",lastUpdatedAt:1617200902,sidebar:"docs",previous:{title:"Op call",permalink:"/docs/reference/opspec/op.yml/call/op"},next:{title:"Serial loop call",permalink:"/docs/reference/opspec/op.yml/call/serial-loop"}},p=[{value:"Properties",id:"properties",children:[{value:"<code>range</code>",id:"range",children:[]},{value:"<code>run</code>",id:"run",children:[]},{value:"<code>vars</code>",id:"vars",children:[]}]},{value:"Example",id:"example",children:[]}],i={rightToc:p},u="wrapper";function s(e){var r=e.components,t=Object(l.a)(e,["components"]);return Object(a.b)(u,Object(n.a)({},i,t,{components:r,mdxType:"MDXLayout"}),Object(a.b)("p",null,"A parallel loop call is an object that runs a call multiple times in parallel (concurrently with no defined order). Examples of use cases include running multiple identical calls (for load testing, for example) or running multiple parameterized calls (such as an identical build for different target architectures)."),Object(a.b)("h2",{id:"properties"},"Properties"),Object(a.b)("h3",{id:"range"},Object(a.b)("inlineCode",{parentName:"h3"},"range")),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"required")),Object(a.b)("p",null,"A ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/opspec/op.yml/rangeable-value"}),"rangeable value")," to loop over."),Object(a.b)("h3",{id:"run"},Object(a.b)("inlineCode",{parentName:"h3"},"run")),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"required")),Object(a.b)("p",null,"A ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/opspec/op.yml/call/index"}),"call")," that will be run each iteration of the loop. ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"#vars"}),"Loop variable")," will be in scope in the definition of the call."),Object(a.b)("h3",{id:"vars"},Object(a.b)("inlineCode",{parentName:"h3"},"vars")),Object(a.b)("p",null,"A ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/opspec/op.yml/loop-vars"}),"loop variables declaration")," that exposes values from the ",Object(a.b)("inlineCode",{parentName:"p"},"range")," to the call."),Object(a.b)("h2",{id:"example"},"Example"),Object(a.b)("p",null,"The following op will emit:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"firstKey firstValue 0\nsecondKey secondValue 1\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),'description: An example of a parallel loop\nrun:\n  parallelLoop:\n    range:\n      firstKey: firstValue\n      secondKey: secondValue\n    vars:\n      index: $(index)\n      key: $(key)\n      value: $(val)\n    run:\n      container:\n        image: { ref: alpine }\n        cmd: ["echo", $(key), $(val), $(index)]\n')))}s.isMDXComponent=!0},216:function(e,r,t){"use strict";t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return m}));var n=t(0),l=t.n(n);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r){if(null==e)return{};var t,n,l=function(e,r){if(null==e)return{};var t,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(l[t]=e[t]);return l}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=l.a.createContext({}),u=function(e){var r=l.a.useContext(i),t=r;return e&&(t="function"==typeof e?e(r):c({},r,{},e)),t},s=function(e){var r=u(e.components);return(l.a.createElement(i.Provider,{value:r},e.children))},d="mdxType",b={inlineCode:"code",wrapper:function(e){var r=e.children;return l.a.createElement(l.a.Fragment,{},r)}},f=Object(n.forwardRef)((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,o=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),s=u(t),d=n,f=s["".concat(o,".").concat(d)]||s[d]||b[d]||a;return t?l.a.createElement(f,c({ref:r},i,{components:t})):l.a.createElement(f,c({ref:r},i))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,o=new Array(a);o[0]=f;var c={};for(var p in r)hasOwnProperty.call(r,p)&&(c[p]=r[p]);c.originalType=e,c[d]="string"==typeof e?e:n,o[1]=c;for(var i=2;i<a;i++)o[i]=t[i];return l.a.createElement.apply(null,o)}return l.a.createElement.apply(null,t)}f.displayName="MDXCreateElement"}}]);